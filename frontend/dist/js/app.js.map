{"version":3,"sources":["../deps/node_modules/browser-pack/_prelude.js","src/client.js","src/components/DevTools.js","src/components/Home.js","src/components/Post.js","src/components/PostEdit.js","src/components/PostList.js","src/components/PostNew.js","src/components/PostView.js","src/components/Root.js","src/helpers/ajax.js","src/helpers/api.js","src/helpers/createActionDispatchers.js","src/helpers/createStore.js","src/reducers/index.js","src/reducers/posts.js","src/reducers/time.js"],"names":[],"mappings":"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","file":"app.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","const React = require('react');\nconst ReactDOM = require('react-dom');\n\nconst createStore = require('./helpers/createStore');\nconst Root = React.createFactory(require('./components/Root'));\n\nconst moment = require('moment');\nconst timeActionCreators = require('./reducers/time');\n\nconst combinedReducers = require('./reducers');\n\n// TODO Section 6: Change code below to get data from the API\n\nwindow.main = (initialState) => {\n  // Create root React component with Redux store\n  const store = createStore(initialState);\n  const rootComponent = Root({ store });\n\n  // Mount React root component in DOM\n  const mountPoint = document.getElementById('root');\n  ReactDOM.render(rootComponent, mountPoint);\n\n  window.setInterval(() => {\n    const now = moment().format();\n    store.dispatch(timeActionCreators.setCurrentTime(now));\n  }, 10000);\n}\n","const React = require('react');\nconst ReduxDevtools = require('redux-devtools');\nconst DockMonitor = require('redux-devtools-dock-monitor').default;\nconst LogMonitor = require('redux-devtools-log-monitor').default;\n\nconst _DevTools = ReduxDevtools.createDevTools(\n  <DockMonitor toggleVisibilityKey=\"h\" changePositionKey=\"q\" defaultIsVisible={true}>\n    <LogMonitor />\n  </DockMonitor>\n);\n\nclass DevTools extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { isMounted: false };\n  }\n\n  static instrument() {\n    return _DevTools.instrument(arguments);\n  }\n\n  componentDidMount() {\n    this.setState({ isMounted: true });\n  }\n\n  render() {\n    return (\n      <div>\n        {this.state.isMounted && <_DevTools />}\n      </div>\n    );\n  }\n};\n\n/**\n * Redux development tools (useful for debugging).\n */\nmodule.exports = DevTools;\n","const React = require('react');\n\nconst PostList = require('./PostList');\n\n/**\n * The guts of the home page.\n */\nconst Home = () => (\n  <div>\n    {/* The heading area of the page */}\n    <div className=\"blog-header\">\n      <h1 className=\"blog-title\">An Example of a Blog</h1>\n      <p className=\"lead blog-description\">React and Redux and Bootstrap, oh my!</p>\n    </div>\n    {/* A list of blog posts, including a couple of buttons */}\n    <PostList />\n  </div>\n);\n\nmodule.exports = Home;\n","const React = require('react');\n\nconst PostEdit = require('./PostEdit');\nconst PostView = require('./PostView');\n\nclass Post extends React.Component {\n  constructor(props) {\n    super(props);\n    // Set initial internal state for this component\n    this.state = { editing: false };\n  }\n\n  render() {\n    const openEdit = () => {\n      this.setState({ editing: true });\n    };\n\n    const closeEdit = () => {\n      this.setState({ editing: false });\n    };\n\n    const saveEdit = (editedPost) => {\n      this.props.savePost(editedPost, (err) => {\n        if(!err) closeEdit();\n      });\n    };\n\n    // TODO Section 8: Add code for delete\n    const deleteThisPost = () => {\n      this.props.deletePost(this.props.post.id);\n    };\n    \n\n    if(this.state.editing) {\n      // Render component for editing the post\n      return (\n        <PostEdit\n          post={this.props.post}\n          onSave={saveEdit}\n          onCancel={closeEdit}\n        />\n      );\n    }\n    // Render read-only view of the post\n    // TODO Section 8: add code for delete\n    return (\n      <PostView\n        post={this.props.post}\n        time={this.props.time}\n        onDelete={deleteThisPost}\n        onEdit={openEdit}\n      />\n    );\n  }\n}\n\n// Export the Post component\nmodule.exports = Post;\n","const React = require('react');\nconst _ = require('lodash');\n\n/**\n * A form for editing a blog post.\n */\nclass PostEdit extends React.Component {\n  constructor(props) {\n    super(props);\n    const post = props.post || {};\n\n    this.state = {\n      title: post.title || '',\n      content: post.content || ''\n    };\n  }\n\n  render() {\n    const revertAndStopEditing = (event) => {\n      event.preventDefault();\n      this.props.onCancel();\n    };\n\n    const submitAndStopEditing = (event) => {\n      event.preventDefault();\n      // Creates a new post object and saves it.\n      const editedPost = _.assign({}, this.props.post, {\n        title: this.state.title,\n        content: this.state.content\n      });\n      this.props.onSave(editedPost);\n    };\n\n    const onTitleChange = (event) => {\n      this.setState({ title: event.target.value });\n    };\n\n    const onContentChange = (event) => {\n      this.setState({ content: event.target.value });\n    };\n\n    return (\n      <form className=\"blog-post\">\n        {/* Title field */}\n        <div className=\"form-group\">\n          <input className=\"form-control input-lg\" value={this.state.title}\n            placeholder=\"Post title\" onChange={onTitleChange}\n          />\n        </div>\n        {/* Content field */}\n        <div className=\"form-group\">\n          <textarea\n            className=\"form-control\"\n            style={{ height: 300 }}\n            value={this.state.content}\n            onChange={onContentChange}\n          />\n        </div>\n        {/* Save button */}\n        <button className=\"btn btn-default pull-right\"\n          onClick={submitAndStopEditing}\n        >\n          Save\n        </button>\n        {/* Cancel button */}\n        <button className=\"btn btn-default pull-right\"\n          style={{ marginRight: '12px' }}\n          onClick={revertAndStopEditing}\n        >\n          Cancel\n        </button>\n      </form>\n    );\n  }\n}\n\nmodule.exports = PostEdit;\n","const React = require('react');\nconst ReactRedux = require('react-redux');\nconst _ = require('lodash');\n\nconst postsActionCreators = require('../reducers/posts');\nconst createActionDispatchers = require('../helpers/createActionDispatchers');\nconst Post = require('./Post');\nconst PostNew = require('./PostNew');\n\n/**\n * A list of blog posts, along with buttons for writing a new post\n * and loading more posts.\n */\nclass PostList extends React.Component {\n  constructor(props) {\n    super(props);\n    // Set initial internal state for this component\n    this.state = { loading: false };\n  }\n\n  render() {\n    const onLoadButtonClick = () => {\n      // If we are not already in the process of loading posts,\n      // start loading more posts.\n      if(!this.state.loading) {\n        this.setState({ loading: true });\n        this.props.loadMorePosts(() => {\n          this.setState({ loading: false });\n        });\n      }\n    };\n\n    // Function which creates a post component from a post ID\n    const createPostComponent = (currentPost) => {\n      /* TODO Section 8: Add code for delete */\n      return (\n        <Post\n          key={currentPost.id}\n          post={currentPost}\n          time={this.props.time}\n          savePost={this.props.savePost}          \n          deletePost={this.props.deletePost}\n        />\n      );\n    };\n\n    return (\n      <div className=\"row\">\n        <div className=\"blog-main\">\n          {/* Button for writing a new post */}\n          <PostNew\n            createPost={this.props.createPost}\n          />\n\n          {/* TODO Section 3: Write code to list all the posts */\n            this.props.posts.visiblePosts.map(createPostComponent)\n          }\n          {/* Button for loading more posts */}\n          <button className=\"blog-load-more btn btn-default btn-lg\"\n            onClick={onLoadButtonClick}\n            disabled={this.state.loading}\n          >\n            {this.state.loading ? 'Loading...' : 'Load more posts'}\n          </button>\n        </div>\n      </div>\n    );\n  }\n}\n\n// Connect PostList component to the Redux store\nconst PostListContainer = ReactRedux.connect(\n  // Map store state to props\n  (state) => ({\n    posts: state.posts,\n    time: state.time\n  }),\n  createActionDispatchers(postsActionCreators)\n)(PostList);\n\nmodule.exports = PostListContainer;\n","const React = require('react');\nconst PostEdit = require('./PostEdit');\n\n/**\n * A button which expands into a form for writing a new post.\n */\nclass PostNew extends React.Component {\n  constructor(props) {\n    super(props);\n    // Set initial internal state for this component\n    this.state = { editing: false };\n  }\n\n  render() {\n    const openEdit = () => {\n      this.setState({ editing: true });\n    };\n\n    const closeEdit = () => {\n      this.setState({ editing: false });\n    };\n\n    const createPost = (newPost) => {\n      this.props.createPost(newPost, (err) => {\n        if(!err) closeEdit();\n      });\n    };\n\n    // TODO Section 7: Write code to switch to edit mode when editing is clicked\n    if(this.state.editing) {\n      // Render component for editing the post\n      return (\n        <PostEdit\n          post={this.props.post}\n          onSave={createPost}\n          onCancel={closeEdit}\n        />\n      );\n    }\n    return (\n      <button className=\"blog-load-more btn btn-primary btn-lg\"\n        onClick={ openEdit }\n      >\n        Write new post\n      </button>\n    );\n  }\n}\n\nmodule.exports = PostNew;\n","const React = require('react');\nconst moment = require('moment');\n\n/**\n * Render edit/delete buttons and post timestamp.\n *\n * List of props: post, time, onEdit, onDelete\n */\nconst PostMeta = (props) => {\n  return (\n    <div className=\"blog-post-meta\">\n      <a role=\"button\" title=\"Edit post\"\n        style={{ paddingRight: '8px' }}\n        onClick={ props.onEdit }\n      >\n        <span className=\"fa fa-edit\" />\n      </a>\n\n      {/* TODO Section 8: Add a delete button */}\n      <a role=\"button\" title=\"Delete post\"\n        style={{ paddingRight: '8px' }}\n        onClick={ props.onDelete }\n      >\n        <span className=\"fa fa-remove\" />\n      </a>\n      \n      { moment(props.post.createdAt).from(props.time.now) }\n    </div>\n  );\n};\n\n/**\n * A read-only view of a blog post.\n * This is a stateless functional component.\n * It takes props as its args and returns what the render method would return.\n *\n * List of props: post, time, onEdit, onDelete\n */\nconst PostView = (props) => {\n  return (\n    <div className=\"blog-post\">\n      <h2 className=\"blog-post-title\">{props.post.title}</h2>\n\n      {/* TODO Section 4: Display blog metadata */}\n      <PostMeta {...props} />\n\n      {/* TODO Section 4: Display blog content */}\n      <div className=\"blog-post-content\">{props.post.content}</div>\n    </div>\n  );\n};\n\nmodule.exports = PostView;\n","/**\n * The root React component from which all other components on the page are\n * descended. It is this component which is directly mounted on the DOM.\n */\n\nconst React = require('react');\nconst ReactRedux = require('react-redux');\n\nconst Provider = ReactRedux.Provider;\nconst Home = require('./Home');\n\n// Enable development tools when in development mode\nlet DevTools = 'span';\nif(process.env.NODE_ENV === 'development') {\n  DevTools = require('./DevTools');\n}\n\n// Define the Root component\nconst Root = (props) => {\n  return (\n    /* The Provider gives descendants the ability to connect to the Redux store */\n    <Provider store={props.store}>\n      <div>\n        {/* The Home component contains the guts of the page */}\n        <Home />\n        {/* DevTools is just an empty element when not in development mode */}\n        <DevTools />\n      </div>\n    </Provider>\n  );\n};\n\nmodule.exports = Root;\n","const ajax = {};\n\nif(process.env.IN_BROWSER) {\n  ajax.request = (opts) => {\n    return new Promise((resolve, reject) => {\n      const xhr = new XMLHttpRequest;\n      xhr.addEventListener('error', () => {\n        reject(new Error('Request failed'));\n      });\n      xhr.addEventListener('load', () => {\n        if(xhr.status !== 200) {\n          reject(new Error('Received status ' + xhr.status));\n        } else {\n          resolve(opts.json ? JSON.parse(xhr.responseText) : xhr.responseText);\n        }\n      });\n      xhr.open(opts.method, opts.url);\n      if(opts.json) {\n        xhr.setRequestHeader('Content-Type', 'application/json');\n        xhr.send(opts.data !== undefined ? JSON.stringify(opts.data) : opts.data);\n      } else {\n        xhr.send(opts.data);\n      }\n    });\n  };\n} else {\n  const request = require('request');\n\n  ajax.request = (opts) => {\n    return new Promise((resolve, reject) => {\n      request({\n        url: opts.url,\n        method: opts.method,\n        body: opts.data,\n        json: opts.json\n      }, (error, response, body) => {\n        if(error) {\n          reject(error);\n        } else if(response.statusCode !== 200) {\n          reject(new Error('Received status ' + response.statusCode));\n        } else {\n          resolve(body);\n        }\n      });\n    });\n  };\n}\n\nmodule.exports = ajax;\n","const ajax = require('./ajax');\n\nconst api = {};\n\nif(process.env.IN_BROWSER) {\n  api.baseUrl = '/api';\n} else {\n  api.baseUrl = 'http://api:3000';\n}\n\napi.get = function(path) {\n  return ajax.request({\n    method: 'GET',\n    url: this.baseUrl + path,\n    json: true\n  });\n};\n\napi.post = function(path, data) {\n  return ajax.request({\n    method: 'POST',\n    url: this.baseUrl + path,\n    json: true,\n    data\n  });\n};\n\napi.put = function(path, data) {\n  return ajax.request({\n    method: 'PUT',\n    url: this.baseUrl + path,\n    json: true,\n    data\n  });\n};\n\napi.delete = function(path) {\n  return ajax.request({\n    method: 'DELETE',\n    url: this.baseUrl + path,\n    json: true\n  });\n};\n\nmodule.exports = api;\n","const _ = require('lodash');\n\nmodule.exports = function() {\n  // Get an array of arguments passed into this function\n  const actionCreatorsArray = _.assign([], arguments);\n\n  // Return a function that, when given a dispatch function, returns an\n  // object containing a bunch of action dispatchers\n  return (dispatch) =>\n    // Iterate over actionCreatorsArray, which is an array of arrays of action\n    // creators\n    actionCreatorsArray.reduce((actionDispatchers, actionCreators) => {\n      // Add an action dispatcher for each action creator in actionCreators\n      Object.keys(actionCreators)\n        .filter((name) => (typeof actionCreators[name] === 'function'))\n        .forEach((name) => {\n          actionDispatchers[name] = function() {\n            return dispatch(actionCreators[name].apply(this, arguments));\n          };\n        });\n      return actionDispatchers;\n    }, {});\n};\n","const Redux = require('redux');\nconst reduxThunk = require('redux-thunk').default;\nconst combinedReducers = require('../reducers');\n\nlet enhancer;\n\nif(process.env.NODE_ENV === 'production') {\n  enhancer = Redux.applyMiddleware(reduxThunk)\n} else {\n  const DevTools = require('../components/DevTools');\n\n  enhancer = Redux.compose(\n    // Enables middleware\n    Redux.applyMiddleware(reduxThunk),\n    // Enables DevTools\n    DevTools.instrument()\n  );\n}\n\nmodule.exports = initialState => {\n  const store = Redux.createStore(combinedReducers, initialState, enhancer);\n  return store;\n}\n","const Redux = require('redux');\n\nconst posts = require('./posts');\nconst time = require('./time');\n\nmodule.exports = Redux.combineReducers({\n  posts,\n  time\n});\n","const _ = require('lodash');\nconst api = require('../helpers/api');\n\n// Action type constants\nconst INSERT = 'blog-frontend/posts/INSERT';\nconst CHANGE = 'blog-frontend/posts/CHANGE';\nconst REMOVE = 'blog-frontend/posts/REMOVE';\n\n// The initial state of blog post data\nconst initialState = {\n  visiblePosts: [\n    { id: 5,\n      title: \"From Redux Store: Companies that make computers\",\n      content: \"Dell Apple Toshiba Acer\",\n      createdAt: \"2016-09-11T23:26:36.000Z\",\n      updatedAt: \"2016-09-11T23:26:36.000Z\"\n    },\n    {id: 4,\n     title: \"From Redux Store: Dell\",\n     content: \"A company that makes computers \",\n     createdAt: \"2016-09-11T23:18:08.000Z\",\n     updatedAt: \"2016-09-11T23:18:08.000Z\"\n    },\n    { id: 3,\n      title: \"From Redux Store: Lego Nexo Knights\",\n      content: \"The best lego toy set in the world.\",\n      createdAt: \"2016-09-11T07:47:30.000Z\",\n      updatedAt: \"2016-09-11T07:47:30.000Z\"\n    },\n    { id: 2,\n      title: \"From Redux Store: React\",\n      content: \"An awesome JavaScript library from …\",\n      createdAt: \"2016-09-11T07:46:55.000Z\",\n      updatedAt: \"2016-09-11T07:46:55.000Z\"\n    },\n    { id: 1,\n      title: \"From Redux Store: Deep Learning\",\n      content: \"The use of neural networks to learn…\",\n      createdAt: \"2016-09-11T07:46:28.000Z\",\n      updatedAt: \"2016-09-11T07:46:28.000Z\"\n    }\n\n  ]\n};\n\n// Function which takes the current data state and an action,\n// and returns a new state\nfunction reducer(state, action) {\n  state = state || initialState;\n  action = action || {};\n\n  switch(action.type) {\n    // Inserts new posts into the local store\n    case INSERT: {\n\n\n      // Add in the new posts\n      // Notice that we do not need to increment the post id. Since the post that we\n      // are putting in is one that is returned by the api server which already has\n      // the id incremented.\n      const unsortedPosts = _.concat(state.visiblePosts, action.posts);\n\n      const visiblePosts = _.orderBy(unsortedPosts, 'createdAt','desc');\n\n      // Return updated state\n      return _.assign({}, state, { visiblePosts} );\n    }\n    // Changes a single post's data in the local store\n    case CHANGE: {\n      const visiblePosts = _.clone(state.visiblePosts);\n      const changedIndex = _.findIndex(state.visiblePosts, {id: action.post.id })\n      visiblePosts[changedIndex] = action.post;\n      return _.assign({}, state, { visiblePosts });\n    }\n\n    // Removes a single post from the visible post list\n    case REMOVE: {\n      const visiblePosts = _.reject(state.visiblePosts, {id: action.id});\n      return _.assign({}, state, { visiblePosts });\n    }\n\n    default: return state;\n  }\n}\n\n// Now we define a whole bunch of action creators\n\n// Inserts posts into the post list\nreducer.insertPosts = (posts) => {\n  return { type: INSERT, posts };\n};\n\n// Removes a post from the visible post list\nreducer.removePost = (id) => {\n  return { type: REMOVE, id };\n};\n\n// Attempts to delete a post from the server and removes it from the visible\n// post list if successful\nreducer.deletePost = (postId) => {\n  // TODO Section 8: Add code to perform delete\n  return (dispatch) => {\n    api.delete('/posts' + postId).then(() => {\n      dispatch(reducer.removePost(postId));\n    }).catch(() => {\n      alert('Failed to delete post.');\n    });\n  };\n};\n\n// Attempts to update a post on the server and updates local post data if\n// successful\nreducer.savePost = (editedPost, callback) => {\n  return (dispatch) => {\n    api.put('/posts/' + editedPost.id, editedPost).then((post) => {\n      // Saves local post.\n      dispatch(reducer.changePost(post));\n      callback();\n    }).catch(() => {\n      alert('Failed to save post.  Are all of the fields filled in correctly?');\n    });\n  };\n};\n\n// Attempts to create a post on the server and inserts it into the local post\n// list if successful\nreducer.createPost = (newPost, callback) => {\n  return (dispatch) => {\n    api.post('/posts', newPost).then((post) => {\n      // This post is one that the store returns us! It has post id incremented to the next available id\n      dispatch(reducer.insertPosts([post]));\n      callback();\n    }).catch(() => {\n      alert('Failed to create post. Are all of the fields filled in correctly?');\n    });\n  };\n};\n\n// Changes local post data\nreducer.changePost = (post) => {\n  return { type: CHANGE, post };\n};\n\n// Attempts to load more posts from the server and inserts them into the local\n// post list if successful\nreducer.loadMorePosts = (callback) => {\n  return (dispatch, getState) => {\n    const state = _.assign({}, initialState, getState().posts);\n\n    let path = '/posts';\n    if (state.visiblePosts.length > 0) {\n        const oldestPost =_.last(state.visiblePosts);\n        path = '/posts?olderThan=' + oldestPost.createdAt;\n    }\n    api.get(path).then((newPosts) => {\n      dispatch(reducer.insertPosts(newPosts));\n      callback();\n    }).catch(() => {\n      alert('Failed to load more posts');\n      callback('Failed to load more posts');\n    });\n\n  };\n\n\n};\n\n// Export the action creators and reducer\nmodule.exports = reducer;\n","const _ = require('lodash');\n\nconst UPDATE = 'blog-frontend/time/UPDATE';\n\nfunction reducer(state, action) {\n  state = state || {};\n  action = action || { type: null };\n\n  switch(action.type) {\n    case UPDATE: {\n      return _.assign({}, state, { now: action.timeNow });\n    } break;\n    default:\n      return state;\n  }\n}\n\nreducer.setCurrentTime = function(timeNow) {\n  return { type: UPDATE, timeNow }\n};\n\nmodule.exports = reducer;\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL2RlcHMvbm9kZV9tb2R1bGVzL2Jyb3dzZXItcGFjay9fcHJlbHVkZS5qcyIsInNyYy9jbGllbnQuanMiLCJzcmMvY29tcG9uZW50cy9EZXZUb29scy5qcyIsInNyYy9jb21wb25lbnRzL0hvbWUuanMiLCJzcmMvY29tcG9uZW50cy9Qb3N0LmpzIiwic3JjL2NvbXBvbmVudHMvUG9zdEVkaXQuanMiLCJzcmMvY29tcG9uZW50cy9Qb3N0TGlzdC5qcyIsInNyYy9jb21wb25lbnRzL1Bvc3ROZXcuanMiLCJzcmMvY29tcG9uZW50cy9Qb3N0Vmlldy5qcyIsInNyYy9jb21wb25lbnRzL1Jvb3QuanMiLCJzcmMvaGVscGVycy9hamF4LmpzIiwic3JjL2hlbHBlcnMvYXBpLmpzIiwic3JjL2hlbHBlcnMvY3JlYXRlQWN0aW9uRGlzcGF0Y2hlcnMuanMiLCJzcmMvaGVscGVycy9jcmVhdGVTdG9yZS5qcyIsInNyYy9yZWR1Y2Vycy9pbmRleC5qcyIsInNyYy9yZWR1Y2Vycy9wb3N0cy5qcyIsInNyYy9yZWR1Y2Vycy90aW1lLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7QUNBQSxJQUFNLFFBQVEsUUFBUSxPQUFSLENBQWQ7QUFDQSxJQUFNLFdBQVcsUUFBUSxXQUFSLENBQWpCOztBQUVBLElBQU0sY0FBYyxRQUFRLHVCQUFSLENBQXBCO0FBQ0EsSUFBTSxPQUFPLE1BQU0sYUFBTixDQUFvQixRQUFRLG1CQUFSLENBQXBCLENBQWI7O0FBRUEsSUFBTSxTQUFTLFFBQVEsUUFBUixDQUFmO0FBQ0EsSUFBTSxxQkFBcUIsUUFBUSxpQkFBUixDQUEzQjs7QUFFQSxJQUFNLG1CQUFtQixRQUFRLFlBQVIsQ0FBekI7O0FBRUE7O0FBRUEsT0FBTyxJQUFQLEdBQWMsVUFBQyxZQUFELEVBQWtCO0FBQzlCO0FBQ0EsTUFBTSxRQUFRLFlBQVksWUFBWixDQUFkO0FBQ0EsTUFBTSxnQkFBZ0IsS0FBSyxFQUFFLFlBQUYsRUFBTCxDQUF0Qjs7QUFFQTtBQUNB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QUM5QixVQUFRLFNBQVMsRUFBakI7QUFDQSxXQUFTLFVBQVUsRUFBRSxNQUFNLElBQVIsRUFBbkI7O0FBRUEsVUFBTyxPQUFPLElBQWQ7QUFDRSxTQUFLLE1BQUw7QUFBYTtBQUNYLGVBQU8sRUFBRSxNQUFGLENBQVMsRUFBVCxFQUFhLEtBQWIsRUFBb0IsRUFBRSxLQUFLLE9BQU8sT0FBZCxFQUFwQixDQUFQO0FBQ0QsT0FBQztBQUNGO0FBQ0UsYUFBTyxLQUFQO0FBTEo7QUFPRDs7QUFFRCxRQUFRLGNBQVIsR0FBeUIsVUFBUyxPQUFULEVBQWtCO0FBQ3pDLFNBQU8sRUFBRSxNQUFNLE1BQVIsRUFBZ0IsZ0JBQWhCLEVBQVA7QUFDRCxDQUZEOztBQUlBLE9BQU8sT0FBUCxHQUFpQixPQUFqQiIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsImNvbnN0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbmNvbnN0IFJlYWN0RE9NID0gcmVxdWlyZSgncmVhY3QtZG9tJyk7XG5cbmNvbnN0IGNyZWF0ZVN0b3JlID0gcmVxdWlyZSgnLi9oZWxwZXJzL2NyZWF0ZVN0b3JlJyk7XG5jb25zdCBSb290ID0gUmVhY3QuY3JlYXRlRmFjdG9yeShyZXF1aXJlKCcuL2NvbXBvbmVudHMvUm9vdCcpKTtcblxuY29uc3QgbW9tZW50ID0gcmVxdWlyZSgnbW9tZW50Jyk7XG5jb25zdCB0aW1lQWN0aW9uQ3JlYXRvcnMgPSByZXF1aXJlKCcuL3JlZHVjZXJzL3RpbWUnKTtcblxuY29uc3QgY29tYmluZWRSZWR1Y2VycyA9IHJlcXVpcmUoJy4vcmVkdWNlcnMnKTtcblxuLy8gVE9ETyBTZWN0aW9uIDY6IENoYW5nZSBjb2RlIGJlbG93IHRvIGdldCBkYXRhIGZyb20gdGhlIEFQSVxuXG53aW5kb3cubWFpbiA9IChpbml0aWFsU3RhdGUpID0+IHtcbiAgLy8gQ3JlYXRlIHJvb3QgUmVhY3QgY29tcG9uZW50IHdpdGggUmVkdXggc3RvcmVcbiAgY29uc3Qgc3RvcmUgPSBjcmVhdGVTdG9yZShpbml0aWFsU3RhdGUpO1xuICBjb25zdCByb290Q29tcG9uZW50ID0gUm9vdCh7IHN0b3JlIH0pO1xuXG4gIC8vIE1vdW50IFJlYWN0IHJvb3QgY29tcG9uZW50IGluIERPTVxuICBjb25zdCBtb3VudFBvaW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvb3QnKTtcbiAgUmVhY3RET00ucmVuZGVyKHJvb3RDb21wb25lbnQsIG1vdW50UG9pbnQpO1xuXG4gIHdpbmRvdy5zZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgY29uc3Qgbm93ID0gbW9tZW50KCkuZm9ybWF0KCk7XG4gICAgc3RvcmUuZGlzcGF0Y2godGltZUFjdGlvbkNyZWF0b3JzLnNldEN1cnJlbnRUaW1lKG5vdykpO1xuICB9LCAxMDAwMCk7XG59XG4iLCJjb25zdCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG5jb25zdCBSZWR1eERldnRvb2xzID0gcmVxdWlyZSgncmVkdXgtZGV2dG9vbHMnKTtcbmNvbnN0IERvY2tNb25pdG9yID0gcmVxdWlyZSgncmVkdXgtZGV2dG9vbHMtZG9jay1tb25pdG9yJykuZGVmYXVsdDtcbmNvbnN0IExvZ01vbml0b3IgPSByZXF1aXJlKCdyZWR1eC1kZXZ0b29scy1sb2ctbW9uaXRvcicpLmRlZmF1bHQ7XG5cbmNvbnN0IF9EZXZUb29scyA9IFJlZHV4RGV2dG9vbHMuY3JlYXRlRGV2VG9vbHMoXG4gIDxEb2NrTW9uaXRvciB0b2dnbGVWaXNpYmlsaXR5S2V5PVwiaFwiIGNoYW5nZVBvc2l0aW9uS2V5PVwicVwiIGRlZmF1bHRJc1Zpc2libGU9e3RydWV9PlxuICAgIDxMb2dNb25pdG9yIC8+XG4gIDwvRG9ja01vbml0b3I+XG4pO1xuXG5jbGFzcyBEZXZUb29scyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIHRoaXMuc3RhdGUgPSB7IGlzTW91bnRlZDogZmFsc2UgfTtcbiAgfVxuXG4gIHN0YXRpYyBpbnN0cnVtZW50KCkge1xuICAgIHJldHVybiBfRGV2VG9vbHMuaW5zdHJ1bWVudChhcmd1bWVudHMpO1xuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7IGlzTW91bnRlZDogdHJ1ZSB9KTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdj5cbiAgICAgICAge3RoaXMuc3RhdGUuaXNNb3VudGVkICYmIDxfRGV2VG9vbHMgLz59XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG59O1xuXG4vKipcbiAqIFJlZHV4IGRldmVsb3BtZW50IHRvb2xzICh1c2VmdWwgZm9yIGRlYnVnZ2luZykuXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gRGV2VG9vbHM7XG4iLCJjb25zdCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG5cbmNvbnN0IFBvc3RMaXN0ID0gcmVxdWlyZSgnLi9Qb3N0TGlzdCcpO1xuXG4vKipcbiAqIFRoZSBndXRzIG9mIHRoZSBob21lIHBhZ2UuXG4gKi9cbmNvbnN0IEhvbWUgPSAoKSA9PiAoXG4gIDxkaXY+XG4gICAgey8qIFRoZSBoZWFkaW5nIGFyZWEgb2YgdGhlIHBhZ2UgKi99XG4gICAgPGRpdiBjbGFzc05hbWU9XCJibG9nLWhlYWRlclwiPlxuICAgICAgPGgxIGNsYXNzTmFtZT1cImJsb2ctdGl0bGVcIj5BbiBFeGFtcGxlIG9mIGEgQmxvZzwvaDE+XG4gICAgICA8cCBjbGFzc05hbWU9XCJsZWFkIGJsb2ctZGVzY3JpcHRpb25cIj5SZWFjdCBhbmQgUmVkdXggYW5kIEJvb3RzdHJhcCwgb2ggbXkhPC9wPlxuICAgIDwvZGl2PlxuICAgIHsvKiBBIGxpc3Qgb2YgYmxvZyBwb3N0cywgaW5jbHVkaW5nIGEgY291cGxlIG9mIGJ1dHRvbnMgKi99XG4gICAgPFBvc3RMaXN0IC8+XG4gIDwvZGl2PlxuKTtcblxubW9kdWxlLmV4cG9ydHMgPSBIb21lO1xuIiwiY29uc3QgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuXG5jb25zdCBQb3N0RWRpdCA9IHJlcXVpcmUoJy4vUG9zdEVkaXQnKTtcbmNvbnN0IFBvc3RWaWV3ID0gcmVxdWlyZSgnLi9Qb3N0VmlldycpO1xuXG5jbGFzcyBQb3N0IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgLy8gU2V0IGluaXRpYWwgaW50ZXJuYWwgc3RhdGUgZm9yIHRoaXMgY29tcG9uZW50XG4gICAgdGhpcy5zdGF0ZSA9IHsgZWRpdGluZzogZmFsc2UgfTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCBvcGVuRWRpdCA9ICgpID0+IHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoeyBlZGl0aW5nOiB0cnVlIH0pO1xuICAgIH07XG5cbiAgICBjb25zdCBjbG9zZUVkaXQgPSAoKSA9PiB7XG4gICAgICB0aGlzLnNldFN0YXRlKHsgZWRpdGluZzogZmFsc2UgfSk7XG4gICAgfTtcblxuICAgIGNvbnN0IHNhdmVFZGl0ID0gKGVkaXRlZFBvc3QpID0+IHtcbiAgICAgIHRoaXMucHJvcHMuc2F2ZVBvc3QoZWRpdGVkUG9zdCwgKGVycikgPT4ge1xuICAgICAgICBpZighZXJyKSBjbG9zZUVkaXQoKTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICAvLyBUT0RPIFNlY3Rpb24gODogQWRkIGNvZGUgZm9yIGRlbGV0ZVxuICAgIGNvbnN0IGRlbGV0ZVRoaXNQb3N0ID0gKCkgPT4ge1xuICAgICAgdGhpcy5wcm9wcy5kZWxldGVQb3N0KHRoaXMucHJvcHMucG9zdC5pZCk7XG4gICAgfTtcbiAgICBcblxuICAgIGlmKHRoaXMuc3RhdGUuZWRpdGluZykge1xuICAgICAgLy8gUmVuZGVyIGNvbXBvbmVudCBmb3IgZWRpdGluZyB0aGUgcG9zdFxuICAgICAgcmV0dXJuIChcbiAgICAgICAgPFBvc3RFZGl0XG4gICAgICAgICAgcG9zdD17dGhpcy5wcm9wcy5wb3N0fVxuICAgICAgICAgIG9uU2F2ZT17c2F2ZUVkaXR9XG4gICAgICAgICAgb25DYW5jZWw9e2Nsb3NlRWRpdH1cbiAgICAgICAgLz5cbiAgICAgICk7XG4gICAgfVxuICAgIC8vIFJlbmRlciByZWFkLW9ubHkgdmlldyBvZiB0aGUgcG9zdFxuICAgIC8vIFRPRE8gU2VjdGlvbiA4OiBhZGQgY29kZSBmb3IgZGVsZXRlXG4gICAgcmV0dXJuIChcbiAgICAgIDxQb3N0Vmlld1xuICAgICAgICBwb3N0PXt0aGlzLnByb3BzLnBvc3R9XG4gICAgICAgIHRpbWU9e3RoaXMucHJvcHMudGltZX1cbiAgICAgICAgb25EZWxldGU9e2RlbGV0ZVRoaXNQb3N0fVxuICAgICAgICBvbkVkaXQ9e29wZW5FZGl0fVxuICAgICAgLz5cbiAgICApO1xuICB9XG59XG5cbi8vIEV4cG9ydCB0aGUgUG9zdCBjb21wb25lbnRcbm1vZHVsZS5leHBvcnRzID0gUG9zdDtcbiIsImNvbnN0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbmNvbnN0IF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcblxuLyoqXG4gKiBBIGZvcm0gZm9yIGVkaXRpbmcgYSBibG9nIHBvc3QuXG4gKi9cbmNsYXNzIFBvc3RFZGl0IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgY29uc3QgcG9zdCA9IHByb3BzLnBvc3QgfHwge307XG5cbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgdGl0bGU6IHBvc3QudGl0bGUgfHwgJycsXG4gICAgICBjb250ZW50OiBwb3N0LmNvbnRlbnQgfHwgJydcbiAgICB9O1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHJldmVydEFuZFN0b3BFZGl0aW5nID0gKGV2ZW50KSA9PiB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5wcm9wcy5vbkNhbmNlbCgpO1xuICAgIH07XG5cbiAgICBjb25zdCBzdWJtaXRBbmRTdG9wRWRpdGluZyA9IChldmVudCkgPT4ge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIC8vIENyZWF0ZXMgYSBuZXcgcG9zdCBvYmplY3QgYW5kIHNhdmVzIGl0LlxuICAgICAgY29uc3QgZWRpdGVkUG9zdCA9IF8uYXNzaWduKHt9LCB0aGlzLnByb3BzLnBvc3QsIHtcbiAgICAgICAgdGl0bGU6IHRoaXMuc3RhdGUudGl0bGUsXG4gICAgICAgIGNvbnRlbnQ6IHRoaXMuc3RhdGUuY29udGVudFxuICAgICAgfSk7XG4gICAgICB0aGlzLnByb3BzLm9uU2F2ZShlZGl0ZWRQb3N0KTtcbiAgICB9O1xuXG4gICAgY29uc3Qgb25UaXRsZUNoYW5nZSA9IChldmVudCkgPT4ge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7IHRpdGxlOiBldmVudC50YXJnZXQudmFsdWUgfSk7XG4gICAgfTtcblxuICAgIGNvbnN0IG9uQ29udGVudENoYW5nZSA9IChldmVudCkgPT4ge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7IGNvbnRlbnQ6IGV2ZW50LnRhcmdldC52YWx1ZSB9KTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxmb3JtIGNsYXNzTmFtZT1cImJsb2ctcG9zdFwiPlxuICAgICAgICB7LyogVGl0bGUgZmllbGQgKi99XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9ybS1ncm91cFwiPlxuICAgICAgICAgIDxpbnB1dCBjbGFzc05hbWU9XCJmb3JtLWNvbnRyb2wgaW5wdXQtbGdcIiB2YWx1ZT17dGhpcy5zdGF0ZS50aXRsZX1cbiAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiUG9zdCB0aXRsZVwiIG9uQ2hhbmdlPXtvblRpdGxlQ2hhbmdlfVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICB7LyogQ29udGVudCBmaWVsZCAqL31cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb3JtLWdyb3VwXCI+XG4gICAgICAgICAgPHRleHRhcmVhXG4gICAgICAgICAgICBjbGFzc05hbWU9XCJmb3JtLWNvbnRyb2xcIlxuICAgICAgICAgICAgc3R5bGU9e3sgaGVpZ2h0OiAzMDAgfX1cbiAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLmNvbnRlbnR9XG4gICAgICAgICAgICBvbkNoYW5nZT17b25Db250ZW50Q2hhbmdlfVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICB7LyogU2F2ZSBidXR0b24gKi99XG4gICAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwiYnRuIGJ0bi1kZWZhdWx0IHB1bGwtcmlnaHRcIlxuICAgICAgICAgIG9uQ2xpY2s9e3N1Ym1pdEFuZFN0b3BFZGl0aW5nfVxuICAgICAgICA+XG4gICAgICAgICAgU2F2ZVxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgey8qIENhbmNlbCBidXR0b24gKi99XG4gICAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwiYnRuIGJ0bi1kZWZhdWx0IHB1bGwtcmlnaHRcIlxuICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiAnMTJweCcgfX1cbiAgICAgICAgICBvbkNsaWNrPXtyZXZlcnRBbmRTdG9wRWRpdGluZ31cbiAgICAgICAgPlxuICAgICAgICAgIENhbmNlbFxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgIDwvZm9ybT5cbiAgICApO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gUG9zdEVkaXQ7XG4iLCJjb25zdCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG5jb25zdCBSZWFjdFJlZHV4ID0gcmVxdWlyZSgncmVhY3QtcmVkdXgnKTtcbmNvbnN0IF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcblxuY29uc3QgcG9zdHNBY3Rpb25DcmVhdG9ycyA9IHJlcXVpcmUoJy4uL3JlZHVjZXJzL3Bvc3RzJyk7XG5jb25zdCBjcmVhdGVBY3Rpb25EaXNwYXRjaGVycyA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvY3JlYXRlQWN0aW9uRGlzcGF0Y2hlcnMnKTtcbmNvbnN0IFBvc3QgPSByZXF1aXJlKCcuL1Bvc3QnKTtcbmNvbnN0IFBvc3ROZXcgPSByZXF1aXJlKCcuL1Bvc3ROZXcnKTtcblxuLyoqXG4gKiBBIGxpc3Qgb2YgYmxvZyBwb3N0cywgYWxvbmcgd2l0aCBidXR0b25zIGZvciB3cml0aW5nIGEgbmV3IHBvc3RcbiAqIGFuZCBsb2FkaW5nIG1vcmUgcG9zdHMuXG4gKi9cbmNsYXNzIFBvc3RMaXN0IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgLy8gU2V0IGluaXRpYWwgaW50ZXJuYWwgc3RhdGUgZm9yIHRoaXMgY29tcG9uZW50XG4gICAgdGhpcy5zdGF0ZSA9IHsgbG9hZGluZzogZmFsc2UgfTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCBvbkxvYWRCdXR0b25DbGljayA9ICgpID0+IHtcbiAgICAgIC8vIElmIHdlIGFyZSBub3QgYWxyZWFkeSBpbiB0aGUgcHJvY2VzcyBvZiBsb2FkaW5nIHBvc3RzLFxuICAgICAgLy8gc3RhcnQgbG9hZGluZyBtb3JlIHBvc3RzLlxuICAgICAgaWYoIXRoaXMuc3RhdGUubG9hZGluZykge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHsgbG9hZGluZzogdHJ1ZSB9KTtcbiAgICAgICAgdGhpcy5wcm9wcy5sb2FkTW9yZVBvc3RzKCgpID0+IHtcbiAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgbG9hZGluZzogZmFsc2UgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBGdW5jdGlvbiB3aGljaCBjcmVhdGVzIGEgcG9zdCBjb21wb25lbnQgZnJvbSBhIHBvc3QgSURcbiAgICBjb25zdCBjcmVhdGVQb3N0Q29tcG9uZW50ID0gKGN1cnJlbnRQb3N0KSA9PiB7XG4gICAgICAvKiBUT0RPIFNlY3Rpb24gODogQWRkIGNvZGUgZm9yIGRlbGV0ZSAqL1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPFBvc3RcbiAgICAgICAgICBrZXk9e2N1cnJlbnRQb3N0LmlkfVxuICAgICAgICAgIHBvc3Q9e2N1cnJlbnRQb3N0fVxuICAgICAgICAgIHRpbWU9e3RoaXMucHJvcHMudGltZX1cbiAgICAgICAgICBzYXZlUG9zdD17dGhpcy5wcm9wcy5zYXZlUG9zdH0gICAgICAgICAgXG4gICAgICAgICAgZGVsZXRlUG9zdD17dGhpcy5wcm9wcy5kZWxldGVQb3N0fVxuICAgICAgICAvPlxuICAgICAgKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm93XCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmxvZy1tYWluXCI+XG4gICAgICAgICAgey8qIEJ1dHRvbiBmb3Igd3JpdGluZyBhIG5ldyBwb3N0ICovfVxuICAgICAgICAgIDxQb3N0TmV3XG4gICAgICAgICAgICBjcmVhdGVQb3N0PXt0aGlzLnByb3BzLmNyZWF0ZVBvc3R9XG4gICAgICAgICAgLz5cblxuICAgICAgICAgIHsvKiBUT0RPIFNlY3Rpb24gMzogV3JpdGUgY29kZSB0byBsaXN0IGFsbCB0aGUgcG9zdHMgKi9cbiAgICAgICAgICAgIHRoaXMucHJvcHMucG9zdHMudmlzaWJsZVBvc3RzLm1hcChjcmVhdGVQb3N0Q29tcG9uZW50KVxuICAgICAgICAgIH1cbiAgICAgICAgICB7LyogQnV0dG9uIGZvciBsb2FkaW5nIG1vcmUgcG9zdHMgKi99XG4gICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9XCJibG9nLWxvYWQtbW9yZSBidG4gYnRuLWRlZmF1bHQgYnRuLWxnXCJcbiAgICAgICAgICAgIG9uQ2xpY2s9e29uTG9hZEJ1dHRvbkNsaWNrfVxuICAgICAgICAgICAgZGlzYWJsZWQ9e3RoaXMuc3RhdGUubG9hZGluZ31cbiAgICAgICAgICA+XG4gICAgICAgICAgICB7dGhpcy5zdGF0ZS5sb2FkaW5nID8gJ0xvYWRpbmcuLi4nIDogJ0xvYWQgbW9yZSBwb3N0cyd9XG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxufVxuXG4vLyBDb25uZWN0IFBvc3RMaXN0IGNvbXBvbmVudCB0byB0aGUgUmVkdXggc3RvcmVcbmNvbnN0IFBvc3RMaXN0Q29udGFpbmVyID0gUmVhY3RSZWR1eC5jb25uZWN0KFxuICAvLyBNYXAgc3RvcmUgc3RhdGUgdG8gcHJvcHNcbiAgKHN0YXRlKSA9PiAoe1xuICAgIHBvc3RzOiBzdGF0ZS5wb3N0cyxcbiAgICB0aW1lOiBzdGF0ZS50aW1lXG4gIH0pLFxuICBjcmVhdGVBY3Rpb25EaXNwYXRjaGVycyhwb3N0c0FjdGlvbkNyZWF0b3JzKVxuKShQb3N0TGlzdCk7XG5cbm1vZHVsZS5leHBvcnRzID0gUG9zdExpc3RDb250YWluZXI7XG4iLCJjb25zdCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG5jb25zdCBQb3N0RWRpdCA9IHJlcXVpcmUoJy4vUG9zdEVkaXQnKTtcblxuLyoqXG4gKiBBIGJ1dHRvbiB3aGljaCBleHBhbmRzIGludG8gYSBmb3JtIGZvciB3cml0aW5nIGEgbmV3IHBvc3QuXG4gKi9cbmNsYXNzIFBvc3ROZXcgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICAvLyBTZXQgaW5pdGlhbCBpbnRlcm5hbCBzdGF0ZSBmb3IgdGhpcyBjb21wb25lbnRcbiAgICB0aGlzLnN0YXRlID0geyBlZGl0aW5nOiBmYWxzZSB9O1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IG9wZW5FZGl0ID0gKCkgPT4ge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7IGVkaXRpbmc6IHRydWUgfSk7XG4gICAgfTtcblxuICAgIGNvbnN0IGNsb3NlRWRpdCA9ICgpID0+IHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoeyBlZGl0aW5nOiBmYWxzZSB9KTtcbiAgICB9O1xuXG4gICAgY29uc3QgY3JlYXRlUG9zdCA9IChuZXdQb3N0KSA9PiB7XG4gICAgICB0aGlzLnByb3BzLmNyZWF0ZVBvc3QobmV3UG9zdCwgKGVycikgPT4ge1xuICAgICAgICBpZighZXJyKSBjbG9zZUVkaXQoKTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICAvLyBUT0RPIFNlY3Rpb24gNzogV3JpdGUgY29kZSB0byBzd2l0Y2ggdG8gZWRpdCBtb2RlIHdoZW4gZWRpdGluZyBpcyBjbGlja2VkXG4gICAgaWYodGhpcy5zdGF0ZS5lZGl0aW5nKSB7XG4gICAgICAvLyBSZW5kZXIgY29tcG9uZW50IGZvciBlZGl0aW5nIHRoZSBwb3N0XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8UG9zdEVkaXRcbiAgICAgICAgICBwb3N0PXt0aGlzLnByb3BzLnBvc3R9XG4gICAgICAgICAgb25TYXZlPXtjcmVhdGVQb3N0fVxuICAgICAgICAgIG9uQ2FuY2VsPXtjbG9zZUVkaXR9XG4gICAgICAgIC8+XG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gKFxuICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9XCJibG9nLWxvYWQtbW9yZSBidG4gYnRuLXByaW1hcnkgYnRuLWxnXCJcbiAgICAgICAgb25DbGljaz17IG9wZW5FZGl0IH1cbiAgICAgID5cbiAgICAgICAgV3JpdGUgbmV3IHBvc3RcbiAgICAgIDwvYnV0dG9uPlxuICAgICk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBQb3N0TmV3O1xuIiwiY29uc3QgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuY29uc3QgbW9tZW50ID0gcmVxdWlyZSgnbW9tZW50Jyk7XG5cbi8qKlxuICogUmVuZGVyIGVkaXQvZGVsZXRlIGJ1dHRvbnMgYW5kIHBvc3QgdGltZXN0YW1wLlxuICpcbiAqIExpc3Qgb2YgcHJvcHM6IHBvc3QsIHRpbWUsIG9uRWRpdCwgb25EZWxldGVcbiAqL1xuY29uc3QgUG9zdE1ldGEgPSAocHJvcHMpID0+IHtcbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImJsb2ctcG9zdC1tZXRhXCI+XG4gICAgICA8YSByb2xlPVwiYnV0dG9uXCIgdGl0bGU9XCJFZGl0IHBvc3RcIlxuICAgICAgICBzdHlsZT17eyBwYWRkaW5nUmlnaHQ6ICc4cHgnIH19XG4gICAgICAgIG9uQ2xpY2s9eyBwcm9wcy5vbkVkaXQgfVxuICAgICAgPlxuICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJmYSBmYS1lZGl0XCIgLz5cbiAgICAgIDwvYT5cblxuICAgICAgey8qIFRPRE8gU2VjdGlvbiA4OiBBZGQgYSBkZWxldGUgYnV0dG9uICovfVxuICAgICAgPGEgcm9sZT1cImJ1dHRvblwiIHRpdGxlPVwiRGVsZXRlIHBvc3RcIlxuICAgICAgICBzdHlsZT17eyBwYWRkaW5nUmlnaHQ6ICc4cHgnIH19XG4gICAgICAgIG9uQ2xpY2s9eyBwcm9wcy5vbkRlbGV0ZSB9XG4gICAgICA+XG4gICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImZhIGZhLXJlbW92ZVwiIC8+XG4gICAgICA8L2E+XG4gICAgICBcbiAgICAgIHsgbW9tZW50KHByb3BzLnBvc3QuY3JlYXRlZEF0KS5mcm9tKHByb3BzLnRpbWUubm93KSB9XG4gICAgPC9kaXY+XG4gICk7XG59O1xuXG4vKipcbiAqIEEgcmVhZC1vbmx5IHZpZXcgb2YgYSBibG9nIHBvc3QuXG4gKiBUaGlzIGlzIGEgc3RhdGVsZXNzIGZ1bmN0aW9uYWwgY29tcG9uZW50LlxuICogSXQgdGFrZXMgcHJvcHMgYXMgaXRzIGFyZ3MgYW5kIHJldHVybnMgd2hhdCB0aGUgcmVuZGVyIG1ldGhvZCB3b3VsZCByZXR1cm4uXG4gKlxuICogTGlzdCBvZiBwcm9wczogcG9zdCwgdGltZSwgb25FZGl0LCBvbkRlbGV0ZVxuICovXG5jb25zdCBQb3N0VmlldyA9IChwcm9wcykgPT4ge1xuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiYmxvZy1wb3N0XCI+XG4gICAgICA8aDIgY2xhc3NOYW1lPVwiYmxvZy1wb3N0LXRpdGxlXCI+e3Byb3BzLnBvc3QudGl0bGV9PC9oMj5cblxuICAgICAgey8qIFRPRE8gU2VjdGlvbiA0OiBEaXNwbGF5IGJsb2cgbWV0YWRhdGEgKi99XG4gICAgICA8UG9zdE1ldGEgey4uLnByb3BzfSAvPlxuXG4gICAgICB7LyogVE9ETyBTZWN0aW9uIDQ6IERpc3BsYXkgYmxvZyBjb250ZW50ICovfVxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJibG9nLXBvc3QtY29udGVudFwiPntwcm9wcy5wb3N0LmNvbnRlbnR9PC9kaXY+XG4gICAgPC9kaXY+XG4gICk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFBvc3RWaWV3O1xuIiwiLyoqXG4gKiBUaGUgcm9vdCBSZWFjdCBjb21wb25lbnQgZnJvbSB3aGljaCBhbGwgb3RoZXIgY29tcG9uZW50cyBvbiB0aGUgcGFnZSBhcmVcbiAqIGRlc2NlbmRlZC4gSXQgaXMgdGhpcyBjb21wb25lbnQgd2hpY2ggaXMgZGlyZWN0bHkgbW91bnRlZCBvbiB0aGUgRE9NLlxuICovXG5cbmNvbnN0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbmNvbnN0IFJlYWN0UmVkdXggPSByZXF1aXJlKCdyZWFjdC1yZWR1eCcpO1xuXG5jb25zdCBQcm92aWRlciA9IFJlYWN0UmVkdXguUHJvdmlkZXI7XG5jb25zdCBIb21lID0gcmVxdWlyZSgnLi9Ib21lJyk7XG5cbi8vIEVuYWJsZSBkZXZlbG9wbWVudCB0b29scyB3aGVuIGluIGRldmVsb3BtZW50IG1vZGVcbmxldCBEZXZUb29scyA9ICdzcGFuJztcbmlmKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gIERldlRvb2xzID0gcmVxdWlyZSgnLi9EZXZUb29scycpO1xufVxuXG4vLyBEZWZpbmUgdGhlIFJvb3QgY29tcG9uZW50XG5jb25zdCBSb290ID0gKHByb3BzKSA9PiB7XG4gIHJldHVybiAoXG4gICAgLyogVGhlIFByb3ZpZGVyIGdpdmVzIGRlc2NlbmRhbnRzIHRoZSBhYmlsaXR5IHRvIGNvbm5lY3QgdG8gdGhlIFJlZHV4IHN0b3JlICovXG4gICAgPFByb3ZpZGVyIHN0b3JlPXtwcm9wcy5zdG9yZX0+XG4gICAgICA8ZGl2PlxuICAgICAgICB7LyogVGhlIEhvbWUgY29tcG9uZW50IGNvbnRhaW5zIHRoZSBndXRzIG9mIHRoZSBwYWdlICovfVxuICAgICAgICA8SG9tZSAvPlxuICAgICAgICB7LyogRGV2VG9vbHMgaXMganVzdCBhbiBlbXB0eSBlbGVtZW50IHdoZW4gbm90IGluIGRldmVsb3BtZW50IG1vZGUgKi99XG4gICAgICAgIDxEZXZUb29scyAvPlxuICAgICAgPC9kaXY+XG4gICAgPC9Qcm92aWRlcj5cbiAgKTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUm9vdDtcbiIsImNvbnN0IGFqYXggPSB7fTtcblxuaWYocHJvY2Vzcy5lbnYuSU5fQlJPV1NFUikge1xuICBhamF4LnJlcXVlc3QgPSAob3B0cykgPT4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBjb25zdCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3Q7XG4gICAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCAoKSA9PiB7XG4gICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ1JlcXVlc3QgZmFpbGVkJykpO1xuICAgICAgfSk7XG4gICAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsICgpID0+IHtcbiAgICAgICAgaWYoeGhyLnN0YXR1cyAhPT0gMjAwKSB7XG4gICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignUmVjZWl2ZWQgc3RhdHVzICcgKyB4aHIuc3RhdHVzKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzb2x2ZShvcHRzLmpzb24gPyBKU09OLnBhcnNlKHhoci5yZXNwb25zZVRleHQpIDogeGhyLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgeGhyLm9wZW4ob3B0cy5tZXRob2QsIG9wdHMudXJsKTtcbiAgICAgIGlmKG9wdHMuanNvbikge1xuICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcbiAgICAgICAgeGhyLnNlbmQob3B0cy5kYXRhICE9PSB1bmRlZmluZWQgPyBKU09OLnN0cmluZ2lmeShvcHRzLmRhdGEpIDogb3B0cy5kYXRhKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHhoci5zZW5kKG9wdHMuZGF0YSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG59IGVsc2Uge1xuICBjb25zdCByZXF1ZXN0ID0gcmVxdWlyZSgncmVxdWVzdCcpO1xuXG4gIGFqYXgucmVxdWVzdCA9IChvcHRzKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHJlcXVlc3Qoe1xuICAgICAgICB1cmw6IG9wdHMudXJsLFxuICAgICAgICBtZXRob2Q6IG9wdHMubWV0aG9kLFxuICAgICAgICBib2R5OiBvcHRzLmRhdGEsXG4gICAgICAgIGpzb246IG9wdHMuanNvblxuICAgICAgfSwgKGVycm9yLCByZXNwb25zZSwgYm9keSkgPT4ge1xuICAgICAgICBpZihlcnJvcikge1xuICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgIH0gZWxzZSBpZihyZXNwb25zZS5zdGF0dXNDb2RlICE9PSAyMDApIHtcbiAgICAgICAgICByZWplY3QobmV3IEVycm9yKCdSZWNlaXZlZCBzdGF0dXMgJyArIHJlc3BvbnNlLnN0YXR1c0NvZGUpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXNvbHZlKGJvZHkpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBhamF4O1xuIiwiY29uc3QgYWpheCA9IHJlcXVpcmUoJy4vYWpheCcpO1xuXG5jb25zdCBhcGkgPSB7fTtcblxuaWYocHJvY2Vzcy5lbnYuSU5fQlJPV1NFUikge1xuICBhcGkuYmFzZVVybCA9ICcvYXBpJztcbn0gZWxzZSB7XG4gIGFwaS5iYXNlVXJsID0gJ2h0dHA6Ly9hcGk6MzAwMCc7XG59XG5cbmFwaS5nZXQgPSBmdW5jdGlvbihwYXRoKSB7XG4gIHJldHVybiBhamF4LnJlcXVlc3Qoe1xuICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgdXJsOiB0aGlzLmJhc2VVcmwgKyBwYXRoLFxuICAgIGpzb246IHRydWVcbiAgfSk7XG59O1xuXG5hcGkucG9zdCA9IGZ1bmN0aW9uKHBhdGgsIGRhdGEpIHtcbiAgcmV0dXJuIGFqYXgucmVxdWVzdCh7XG4gICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgdXJsOiB0aGlzLmJhc2VVcmwgKyBwYXRoLFxuICAgIGpzb246IHRydWUsXG4gICAgZGF0YVxuICB9KTtcbn07XG5cbmFwaS5wdXQgPSBmdW5jdGlvbihwYXRoLCBkYXRhKSB7XG4gIHJldHVybiBhamF4LnJlcXVlc3Qoe1xuICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgdXJsOiB0aGlzLmJhc2VVcmwgKyBwYXRoLFxuICAgIGpzb246IHRydWUsXG4gICAgZGF0YVxuICB9KTtcbn07XG5cbmFwaS5kZWxldGUgPSBmdW5jdGlvbihwYXRoKSB7XG4gIHJldHVybiBhamF4LnJlcXVlc3Qoe1xuICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgdXJsOiB0aGlzLmJhc2VVcmwgKyBwYXRoLFxuICAgIGpzb246IHRydWVcbiAgfSk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGFwaTtcbiIsImNvbnN0IF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcbiAgLy8gR2V0IGFuIGFycmF5IG9mIGFyZ3VtZW50cyBwYXNzZWQgaW50byB0aGlzIGZ1bmN0aW9uXG4gIGNvbnN0IGFjdGlvbkNyZWF0b3JzQXJyYXkgPSBfLmFzc2lnbihbXSwgYXJndW1lbnRzKTtcblxuICAvLyBSZXR1cm4gYSBmdW5jdGlvbiB0aGF0LCB3aGVuIGdpdmVuIGEgZGlzcGF0Y2ggZnVuY3Rpb24sIHJldHVybnMgYW5cbiAgLy8gb2JqZWN0IGNvbnRhaW5pbmcgYSBidW5jaCBvZiBhY3Rpb24gZGlzcGF0Y2hlcnNcbiAgcmV0dXJuIChkaXNwYXRjaCkgPT5cbiAgICAvLyBJdGVyYXRlIG92ZXIgYWN0aW9uQ3JlYXRvcnNBcnJheSwgd2hpY2ggaXMgYW4gYXJyYXkgb2YgYXJyYXlzIG9mIGFjdGlvblxuICAgIC8vIGNyZWF0b3JzXG4gICAgYWN0aW9uQ3JlYXRvcnNBcnJheS5yZWR1Y2UoKGFjdGlvbkRpc3BhdGNoZXJzLCBhY3Rpb25DcmVhdG9ycykgPT4ge1xuICAgICAgLy8gQWRkIGFuIGFjdGlvbiBkaXNwYXRjaGVyIGZvciBlYWNoIGFjdGlvbiBjcmVhdG9yIGluIGFjdGlvbkNyZWF0b3JzXG4gICAgICBPYmplY3Qua2V5cyhhY3Rpb25DcmVhdG9ycylcbiAgICAgICAgLmZpbHRlcigobmFtZSkgPT4gKHR5cGVvZiBhY3Rpb25DcmVhdG9yc1tuYW1lXSA9PT0gJ2Z1bmN0aW9uJykpXG4gICAgICAgIC5mb3JFYWNoKChuYW1lKSA9PiB7XG4gICAgICAgICAgYWN0aW9uRGlzcGF0Y2hlcnNbbmFtZV0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBkaXNwYXRjaChhY3Rpb25DcmVhdG9yc1tuYW1lXS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcbiAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICAgIHJldHVybiBhY3Rpb25EaXNwYXRjaGVycztcbiAgICB9LCB7fSk7XG59O1xuIiwiY29uc3QgUmVkdXggPSByZXF1aXJlKCdyZWR1eCcpO1xuY29uc3QgcmVkdXhUaHVuayA9IHJlcXVpcmUoJ3JlZHV4LXRodW5rJykuZGVmYXVsdDtcbmNvbnN0IGNvbWJpbmVkUmVkdWNlcnMgPSByZXF1aXJlKCcuLi9yZWR1Y2VycycpO1xuXG5sZXQgZW5oYW5jZXI7XG5cbmlmKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicpIHtcbiAgZW5oYW5jZXIgPSBSZWR1eC5hcHBseU1pZGRsZXdhcmUocmVkdXhUaHVuaylcbn0gZWxzZSB7XG4gIGNvbnN0IERldlRvb2xzID0gcmVxdWlyZSgnLi4vY29tcG9uZW50cy9EZXZUb29scycpO1xuXG4gIGVuaGFuY2VyID0gUmVkdXguY29tcG9zZShcbiAgICAvLyBFbmFibGVzIG1pZGRsZXdhcmVcbiAgICBSZWR1eC5hcHBseU1pZGRsZXdhcmUocmVkdXhUaHVuayksXG4gICAgLy8gRW5hYmxlcyBEZXZUb29sc1xuICAgIERldlRvb2xzLmluc3RydW1lbnQoKVxuICApO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGluaXRpYWxTdGF0ZSA9PiB7XG4gIGNvbnN0IHN0b3JlID0gUmVkdXguY3JlYXRlU3RvcmUoY29tYmluZWRSZWR1Y2VycywgaW5pdGlhbFN0YXRlLCBlbmhhbmNlcik7XG4gIHJldHVybiBzdG9yZTtcbn1cbiIsImNvbnN0IFJlZHV4ID0gcmVxdWlyZSgncmVkdXgnKTtcblxuY29uc3QgcG9zdHMgPSByZXF1aXJlKCcuL3Bvc3RzJyk7XG5jb25zdCB0aW1lID0gcmVxdWlyZSgnLi90aW1lJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gUmVkdXguY29tYmluZVJlZHVjZXJzKHtcbiAgcG9zdHMsXG4gIHRpbWVcbn0pO1xuIiwiY29uc3QgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xuY29uc3QgYXBpID0gcmVxdWlyZSgnLi4vaGVscGVycy9hcGknKTtcblxuLy8gQWN0aW9uIHR5cGUgY29uc3RhbnRzXG5jb25zdCBJTlNFUlQgPSAnYmxvZy1mcm9udGVuZC9wb3N0cy9JTlNFUlQnO1xuY29uc3QgQ0hBTkdFID0gJ2Jsb2ctZnJvbnRlbmQvcG9zdHMvQ0hBTkdFJztcbmNvbnN0IFJFTU9WRSA9ICdibG9nLWZyb250ZW5kL3Bvc3RzL1JFTU9WRSc7XG5cbi8vIFRoZSBpbml0aWFsIHN0YXRlIG9mIGJsb2cgcG9zdCBkYXRhXG5jb25zdCBpbml0aWFsU3RhdGUgPSB7XG4gIHZpc2libGVQb3N0czogW1xuICAgIHsgaWQ6IDUsXG4gICAgICB0aXRsZTogXCJGcm9tIFJlZHV4IFN0b3JlOiBDb21wYW5pZXMgdGhhdCBtYWtlIGNvbXB1dGVyc1wiLFxuICAgICAgY29udGVudDogXCJEZWxsIEFwcGxlIFRvc2hpYmEgQWNlclwiLFxuICAgICAgY3JlYXRlZEF0OiBcIjIwMTYtMDktMTFUMjM6MjY6MzYuMDAwWlwiLFxuICAgICAgdXBkYXRlZEF0OiBcIjIwMTYtMDktMTFUMjM6MjY6MzYuMDAwWlwiXG4gICAgfSxcbiAgICB7aWQ6IDQsXG4gICAgIHRpdGxlOiBcIkZyb20gUmVkdXggU3RvcmU6IERlbGxcIixcbiAgICAgY29udGVudDogXCJBIGNvbXBhbnkgdGhhdCBtYWtlcyBjb21wdXRlcnMgXCIsXG4gICAgIGNyZWF0ZWRBdDogXCIyMDE2LTA5LTExVDIzOjE4OjA4LjAwMFpcIixcbiAgICAgdXBkYXRlZEF0OiBcIjIwMTYtMDktMTFUMjM6MTg6MDguMDAwWlwiXG4gICAgfSxcbiAgICB7IGlkOiAzLFxuICAgICAgdGl0bGU6IFwiRnJvbSBSZWR1eCBTdG9yZTogTGVnbyBOZXhvIEtuaWdodHNcIixcbiAgICAgIGNvbnRlbnQ6IFwiVGhlIGJlc3QgbGVnbyB0b3kgc2V0IGluIHRoZSB3b3JsZC5cIixcbiAgICAgIGNyZWF0ZWRBdDogXCIyMDE2LTA5LTExVDA3OjQ3OjMwLjAwMFpcIixcbiAgICAgIHVwZGF0ZWRBdDogXCIyMDE2LTA5LTExVDA3OjQ3OjMwLjAwMFpcIlxuICAgIH0sXG4gICAgeyBpZDogMixcbiAgICAgIHRpdGxlOiBcIkZyb20gUmVkdXggU3RvcmU6IFJlYWN0XCIsXG4gICAgICBjb250ZW50OiBcIkFuIGF3ZXNvbWUgSmF2YVNjcmlwdCBsaWJyYXJ5IGZyb20g4oCmXCIsXG4gICAgICBjcmVhdGVkQXQ6IFwiMjAxNi0wOS0xMVQwNzo0Njo1NS4wMDBaXCIsXG4gICAgICB1cGRhdGVkQXQ6IFwiMjAxNi0wOS0xMVQwNzo0Njo1NS4wMDBaXCJcbiAgICB9LFxuICAgIHsgaWQ6IDEsXG4gICAgICB0aXRsZTogXCJGcm9tIFJlZHV4IFN0b3JlOiBEZWVwIExlYXJuaW5nXCIsXG4gICAgICBjb250ZW50OiBcIlRoZSB1c2Ugb2YgbmV1cmFsIG5ldHdvcmtzIHRvIGxlYXJu4oCmXCIsXG4gICAgICBjcmVhdGVkQXQ6IFwiMjAxNi0wOS0xMVQwNzo0NjoyOC4wMDBaXCIsXG4gICAgICB1cGRhdGVkQXQ6IFwiMjAxNi0wOS0xMVQwNzo0NjoyOC4wMDBaXCJcbiAgICB9XG5cbiAgXVxufTtcblxuLy8gRnVuY3Rpb24gd2hpY2ggdGFrZXMgdGhlIGN1cnJlbnQgZGF0YSBzdGF0ZSBhbmQgYW4gYWN0aW9uLFxuLy8gYW5kIHJldHVybnMgYSBuZXcgc3RhdGVcbmZ1bmN0aW9uIHJlZHVjZXIoc3RhdGUsIGFjdGlvbikge1xuICBzdGF0ZSA9IHN0YXRlIHx8IGluaXRpYWxTdGF0ZTtcbiAgYWN0aW9uID0gYWN0aW9uIHx8IHt9O1xuXG4gIHN3aXRjaChhY3Rpb24udHlwZSkge1xuICAgIC8vIEluc2VydHMgbmV3IHBvc3RzIGludG8gdGhlIGxvY2FsIHN0b3JlXG4gICAgY2FzZSBJTlNFUlQ6IHtcblxuXG4gICAgICAvLyBBZGQgaW4gdGhlIG5ldyBwb3N0c1xuICAgICAgLy8gTm90aWNlIHRoYXQgd2UgZG8gbm90IG5lZWQgdG8gaW5jcmVtZW50IHRoZSBwb3N0IGlkLiBTaW5jZSB0aGUgcG9zdCB0aGF0IHdlXG4gICAgICAvLyBhcmUgcHV0dGluZyBpbiBpcyBvbmUgdGhhdCBpcyByZXR1cm5lZCBieSB0aGUgYXBpIHNlcnZlciB3aGljaCBhbHJlYWR5IGhhc1xuICAgICAgLy8gdGhlIGlkIGluY3JlbWVudGVkLlxuICAgICAgY29uc3QgdW5zb3J0ZWRQb3N0cyA9IF8uY29uY2F0KHN0YXRlLnZpc2libGVQb3N0cywgYWN0aW9uLnBvc3RzKTtcblxuICAgICAgY29uc3QgdmlzaWJsZVBvc3RzID0gXy5vcmRlckJ5KHVuc29ydGVkUG9zdHMsICdjcmVhdGVkQXQnLCdkZXNjJyk7XG5cbiAgICAgIC8vIFJldHVybiB1cGRhdGVkIHN0YXRlXG4gICAgICByZXR1cm4gXy5hc3NpZ24oe30sIHN0YXRlLCB7IHZpc2libGVQb3N0c30gKTtcbiAgICB9XG4gICAgLy8gQ2hhbmdlcyBhIHNpbmdsZSBwb3N0J3MgZGF0YSBpbiB0aGUgbG9jYWwgc3RvcmVcbiAgICBjYXNlIENIQU5HRToge1xuICAgICAgY29uc3QgdmlzaWJsZVBvc3RzID0gXy5jbG9uZShzdGF0ZS52aXNpYmxlUG9zdHMpO1xuICAgICAgY29uc3QgY2hhbmdlZEluZGV4ID0gXy5maW5kSW5kZXgoc3RhdGUudmlzaWJsZVBvc3RzLCB7aWQ6IGFjdGlvbi5wb3N0LmlkIH0pXG4gICAgICB2aXNpYmxlUG9zdHNbY2hhbmdlZEluZGV4XSA9IGFjdGlvbi5wb3N0O1xuICAgICAgcmV0dXJuIF8uYXNzaWduKHt9LCBzdGF0ZSwgeyB2aXNpYmxlUG9zdHMgfSk7XG4gICAgfVxuXG4gICAgLy8gUmVtb3ZlcyBhIHNpbmdsZSBwb3N0IGZyb20gdGhlIHZpc2libGUgcG9zdCBsaXN0XG4gICAgY2FzZSBSRU1PVkU6IHtcbiAgICAgIGNvbnN0IHZpc2libGVQb3N0cyA9IF8ucmVqZWN0KHN0YXRlLnZpc2libGVQb3N0cywge2lkOiBhY3Rpb24uaWR9KTtcbiAgICAgIHJldHVybiBfLmFzc2lnbih7fSwgc3RhdGUsIHsgdmlzaWJsZVBvc3RzIH0pO1xuICAgIH1cblxuICAgIGRlZmF1bHQ6IHJldHVybiBzdGF0ZTtcbiAgfVxufVxuXG4vLyBOb3cgd2UgZGVmaW5lIGEgd2hvbGUgYnVuY2ggb2YgYWN0aW9uIGNyZWF0b3JzXG5cbi8vIEluc2VydHMgcG9zdHMgaW50byB0aGUgcG9zdCBsaXN0XG5yZWR1Y2VyLmluc2VydFBvc3RzID0gKHBvc3RzKSA9PiB7XG4gIHJldHVybiB7IHR5cGU6IElOU0VSVCwgcG9zdHMgfTtcbn07XG5cbi8vIFJlbW92ZXMgYSBwb3N0IGZyb20gdGhlIHZpc2libGUgcG9zdCBsaXN0XG5yZWR1Y2VyLnJlbW92ZVBvc3QgPSAoaWQpID0+IHtcbiAgcmV0dXJuIHsgdHlwZTogUkVNT1ZFLCBpZCB9O1xufTtcblxuLy8gQXR0ZW1wdHMgdG8gZGVsZXRlIGEgcG9zdCBmcm9tIHRoZSBzZXJ2ZXIgYW5kIHJlbW92ZXMgaXQgZnJvbSB0aGUgdmlzaWJsZVxuLy8gcG9zdCBsaXN0IGlmIHN1Y2Nlc3NmdWxcbnJlZHVjZXIuZGVsZXRlUG9zdCA9IChwb3N0SWQpID0+IHtcbiAgLy8gVE9ETyBTZWN0aW9uIDg6IEFkZCBjb2RlIHRvIHBlcmZvcm0gZGVsZXRlXG4gIHJldHVybiAoZGlzcGF0Y2gpID0+IHtcbiAgICBhcGkuZGVsZXRlKCcvcG9zdHMnICsgcG9zdElkKS50aGVuKCgpID0+IHtcbiAgICAgIGRpc3BhdGNoKHJlZHVjZXIucmVtb3ZlUG9zdChwb3N0SWQpKTtcbiAgICB9KS5jYXRjaCgoKSA9PiB7XG4gICAgICBhbGVydCgnRmFpbGVkIHRvIGRlbGV0ZSBwb3N0LicpO1xuICAgIH0pO1xuICB9O1xufTtcblxuLy8gQXR0ZW1wdHMgdG8gdXBkYXRlIGEgcG9zdCBvbiB0aGUgc2VydmVyIGFuZCB1cGRhdGVzIGxvY2FsIHBvc3QgZGF0YSBpZlxuLy8gc3VjY2Vzc2Z1bFxucmVkdWNlci5zYXZlUG9zdCA9IChlZGl0ZWRQb3N0LCBjYWxsYmFjaykgPT4ge1xuICByZXR1cm4gKGRpc3BhdGNoKSA9PiB7XG4gICAgYXBpLnB1dCgnL3Bvc3RzLycgKyBlZGl0ZWRQb3N0LmlkLCBlZGl0ZWRQb3N0KS50aGVuKChwb3N0KSA9PiB7XG4gICAgICAvLyBTYXZlcyBsb2NhbCBwb3N0LlxuICAgICAgZGlzcGF0Y2gocmVkdWNlci5jaGFuZ2VQb3N0KHBvc3QpKTtcbiAgICAgIGNhbGxiYWNrKCk7XG4gICAgfSkuY2F0Y2goKCkgPT4ge1xuICAgICAgYWxlcnQoJ0ZhaWxlZCB0byBzYXZlIHBvc3QuICBBcmUgYWxsIG9mIHRoZSBmaWVsZHMgZmlsbGVkIGluIGNvcnJlY3RseT8nKTtcbiAgICB9KTtcbiAgfTtcbn07XG5cbi8vIEF0dGVtcHRzIHRvIGNyZWF0ZSBhIHBvc3Qgb24gdGhlIHNlcnZlciBhbmQgaW5zZXJ0cyBpdCBpbnRvIHRoZSBsb2NhbCBwb3N0XG4vLyBsaXN0IGlmIHN1Y2Nlc3NmdWxcbnJlZHVjZXIuY3JlYXRlUG9zdCA9IChuZXdQb3N0LCBjYWxsYmFjaykgPT4ge1xuICByZXR1cm4gKGRpc3BhdGNoKSA9PiB7XG4gICAgYXBpLnBvc3QoJy9wb3N0cycsIG5ld1Bvc3QpLnRoZW4oKHBvc3QpID0+IHtcbiAgICAgIC8vIFRoaXMgcG9zdCBpcyBvbmUgdGhhdCB0aGUgc3RvcmUgcmV0dXJucyB1cyEgSXQgaGFzIHBvc3QgaWQgaW5jcmVtZW50ZWQgdG8gdGhlIG5leHQgYXZhaWxhYmxlIGlkXG4gICAgICBkaXNwYXRjaChyZWR1Y2VyLmluc2VydFBvc3RzKFtwb3N0XSkpO1xuICAgICAgY2FsbGJhY2soKTtcbiAgICB9KS5jYXRjaCgoKSA9PiB7XG4gICAgICBhbGVydCgnRmFpbGVkIHRvIGNyZWF0ZSBwb3N0LiBBcmUgYWxsIG9mIHRoZSBmaWVsZHMgZmlsbGVkIGluIGNvcnJlY3RseT8nKTtcbiAgICB9KTtcbiAgfTtcbn07XG5cbi8vIENoYW5nZXMgbG9jYWwgcG9zdCBkYXRhXG5yZWR1Y2VyLmNoYW5nZVBvc3QgPSAocG9zdCkgPT4ge1xuICByZXR1cm4geyB0eXBlOiBDSEFOR0UsIHBvc3QgfTtcbn07XG5cbi8vIEF0dGVtcHRzIHRvIGxvYWQgbW9yZSBwb3N0cyBmcm9tIHRoZSBzZXJ2ZXIgYW5kIGluc2VydHMgdGhlbSBpbnRvIHRoZSBsb2NhbFxuLy8gcG9zdCBsaXN0IGlmIHN1Y2Nlc3NmdWxcbnJlZHVjZXIubG9hZE1vcmVQb3N0cyA9IChjYWxsYmFjaykgPT4ge1xuICByZXR1cm4gKGRpc3BhdGNoLCBnZXRTdGF0ZSkgPT4ge1xuICAgIGNvbnN0IHN0YXRlID0gXy5hc3NpZ24oe30sIGluaXRpYWxTdGF0ZSwgZ2V0U3RhdGUoKS5wb3N0cyk7XG5cbiAgICBsZXQgcGF0aCA9ICcvcG9zdHMnO1xuICAgIGlmIChzdGF0ZS52aXNpYmxlUG9zdHMubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCBvbGRlc3RQb3N0ID1fLmxhc3Qoc3RhdGUudmlzaWJsZVBvc3RzKTtcbiAgICAgICAgcGF0aCA9ICcvcG9zdHM/b2xkZXJUaGFuPScgKyBvbGRlc3RQb3N0LmNyZWF0ZWRBdDtcbiAgICB9XG4gICAgYXBpLmdldChwYXRoKS50aGVuKChuZXdQb3N0cykgPT4ge1xuICAgICAgZGlzcGF0Y2gocmVkdWNlci5pbnNlcnRQb3N0cyhuZXdQb3N0cykpO1xuICAgICAgY2FsbGJhY2soKTtcbiAgICB9KS5jYXRjaCgoKSA9PiB7XG4gICAgICBhbGVydCgnRmFpbGVkIHRvIGxvYWQgbW9yZSBwb3N0cycpO1xuICAgICAgY2FsbGJhY2soJ0ZhaWxlZCB0byBsb2FkIG1vcmUgcG9zdHMnKTtcbiAgICB9KTtcblxuICB9O1xuXG5cbn07XG5cbi8vIEV4cG9ydCB0aGUgYWN0aW9uIGNyZWF0b3JzIGFuZCByZWR1Y2VyXG5tb2R1bGUuZXhwb3J0cyA9IHJlZHVjZXI7XG4iLCJjb25zdCBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XG5cbmNvbnN0IFVQREFURSA9ICdibG9nLWZyb250ZW5kL3RpbWUvVVBEQVRFJztcblxuZnVuY3Rpb24gcmVkdWNlcihzdGF0ZSwgYWN0aW9uKSB7XG4gIHN0YXRlID0gc3RhdGUgfHwge307XG4gIGFjdGlvbiA9IGFjdGlvbiB8fCB7IHR5cGU6IG51bGwgfTtcblxuICBzd2l0Y2goYWN0aW9uLnR5cGUpIHtcbiAgICBjYXNlIFVQREFURToge1xuICAgICAgcmV0dXJuIF8uYXNzaWduKHt9LCBzdGF0ZSwgeyBub3c6IGFjdGlvbi50aW1lTm93IH0pO1xuICAgIH0gYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBzdGF0ZTtcbiAgfVxufVxuXG5yZWR1Y2VyLnNldEN1cnJlbnRUaW1lID0gZnVuY3Rpb24odGltZU5vdykge1xuICByZXR1cm4geyB0eXBlOiBVUERBVEUsIHRpbWVOb3cgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSByZWR1Y2VyO1xuIl19"}